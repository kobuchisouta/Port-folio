<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Oleo+Script:wght@400;700&family=Shippori+Mincho+B1&display=swap"
        rel="stylesheet">
    <title>Portfolio</title>
</head>

<body>
    <header class="c-header c-hamburger-menu">
        <a href="#" class="c-header__logo">PORTFOLIO</a>
        <input type="checkbox" name="hamburger" id="hamburger" class="c-hamburger-menu__input" />
        <label for="hamburger" class="c-hamburger-menu__bg"></label>
        <ul class="c-header__list c-hamburger-menu__list">
            <li class="c-header__list-item">
                <a href="#Profile" class="c-header__list-link">Profile</a>
            </li>
            <li class="c-header__list-item">
                <a href="#Project" class="c-header__list-link">Project</a>
            </li>
            <li class="c-header__list-item">
                <a href="#Contact" class="c-header__list-link">Contact</a>
            </li>
        </ul>
        <label for="hamburger" class="c-hamburger-menu__button">
            <span class="c-hamburger-menu__button-mark"></span>
            <span class="c-hamburger-menu__button-mark"></span>
            <span class="c-hamburger-menu__button-mark"></span>
        </label>
    </header>
    <main>
        <div class="firstview">
            <div class="firstview__bt__wrap">
                <h1>
                    Portfolio<br>
                    <span>
                        SOTA<br>
                        KOBUCHI
                    </span>
                </h1>
                <figure>
                    <div class="Profile_button">
                        <a href="./profile.html">Profile</a>
                    </div>
                </figure>
            </div>
            <img src="./image/IMG_1249.jpg" alt="自分の写真" class="firstview-image">
        </div>
        <div class="container">
            <div class="block">
                <svg class="circleText" viewBox="0 0 100 100">
                    <path id="circle" class="circleText__circle" d="M 0 50 A 50 50 0 1 1 0 51 z" fill="none" />
                    <text class="circleText__text">
                        <textPath xlink:href="#circle">
                            Souta Portfolio Souta Portfolio Souta Portfolio Souta
                        </textPath>
                    </text>
                </svg>
            </div>
        </div>
        <div class="scroll-wrapper">
            <div class="scroll">
                <span></span>
            </div>
        </div>

        <section id="Profile">
            <div class="img_wrap">
                <figure>
                    <img src="./image/my.png" alt="自分の写真" class="profile_photo">
                </figure>
                <div class="profile_bg_wrap">
                    <span class="profile_bg"></span>
                </div>
            </div>
            <div class="profile_name_wrap">
                <div class="profile_name">
                    <h2>小淵颯太 - Sota Kobuchi</h2>
                    <p>
                        ECCコンピューター専門学校/マルチメディア研究学科/Webデザインコース<br>
                        26年卒業予定
                    </p>
                </div>
                <div class="profile_text">
                    <p>
                        元々は理系の大学に通い、工学を学んでいましたが
                        友達の誘いもあり、このweb業界に飛び込みました!
                        パソコンもほとんど触ったことがなかったのですが
                        持ち前の根性でなんとか喰らいついて日々勉強中です！
                    </p>
                </div>
                <div class="Profile_button">
                    <a href="./profile.html">Profile</a>
                </div>
            </div>
        </section>
        <div id="Project">
            <section class="project">
                <h2>Project</h2>
                <div class="project__wrap">
                    <div class="projects-container">
                        <div class="project__item">
                            <figure>
                                <img src="./image/iMac 24 inch2.png" alt="ポートフォリオサイトの画像">
                            </figure>
                            <div class="project">
                                <h3>
                                    <span>Port folio</span><br>

                                </h3>
                                <p>
                                    自分のポートフォリオサイトを制作しました！
                                </p>
                                <div class="project__item__button">
                                    <a href="./port folio.html">詳細を見る</a>
                                </div>
                            </div>
                        </div>
                        <div class="project__item">
                            <figure>
                                <img src="./image/iMac 24 inch.png" alt="18.44カフェの画像">
                            </figure>
                            <div class="project">
                                <h3>
                                    Skill Link
                                </h3>
                                <p>
                                    学生が働きながらエンジニアのスキルアップ
                                </p>
                                <div class="project__item__button">
                                    <a href="./skill link.html">詳細を見る</a>
                                </div>
                            </div>
                        </div>
                        <div class="project__item">
                            <figure>
                                <img src="./image/project.png" alt="18.44カフェの画像">
                            </figure>
                            <div class="project">
                                <h3>
                                    Baseball cafe <span>18.44</span><br>
                                    〜野球バカが集まるお店〜
                                </h3>
                                <p>
                                    野球とカフェを同時に楽しめる
                                    カフェのサイトを制作しました！
                                </p>
                                <div class="project__item__button">
                                    <a href="./18.44.html">詳細を見る</a>
                                </div>
                            </div>
                        </div>
                        <div class="project__item">
                            <figure>
                                <img src="./image/check it out.jpg" alt="18.44カフェの画像">
                            </figure>
                            <div class="project">
                                <h3>
                                    <span>Check it out!</span><br>

                                </h3>
                                <p>
                                    これ一つでHIPHOPの情報を全て網羅
                                </p>
                                <div class="project__item__button">
                                    <a href="./check it out.html">詳細を見る</a>
                                </div>
                            </div>
                        </div>
                        <div class="project__item">
                            <figure>
                                <img src="./image/kanpai2.jpg" alt="18.44カフェの画像">
                            </figure>
                            <div class="project">
                                <h3>
                                    <span>KANPAI</span><br>

                                </h3>
                                <p>
                                    飲み会の予定をこれ1つで管理！<br>
                                    予定が決まったら
                                    みんなで乾杯しよう！
                                </p>
                                <div class="project__item__button">
                                    <a href="./kanpai.html">詳細を見る</a>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>
        </div>
        <footer>
            <span class="contact-label">Contact</span>
            <a href="mailto:kobu0612@gmail.com" class="email-link">kobu0612@gmail.com</a>
            <h1 class="name">Souta Kobuchi</h1>
            <h2 class="portfolio">Portfolio Site</h2>
        </footer>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const items = Array.from(document.querySelectorAll('.project__item'));
            const container = document.querySelector('.projects-container');
            const connectors = [];

            items.forEach((item, idx) => {
                if (idx === items.length - 1) return;
                const nextItem = items[idx + 1];

                const connector = document.createElement('div');
                connector.classList.add('connector');
                const line = document.createElement('div');
                line.classList.add('connector-line');
                connector.appendChild(line);
                container.appendChild(connector);

                connectors.push({
                    connector,
                    line,
                    prevItem: item,
                    nextItem: nextItem
                });
            });

            function recalcConnectorPositions() {
                const containerRect = container.getBoundingClientRect();
                const containerTopDoc = containerRect.top + window.pageYOffset;
                const containerLeftDoc = containerRect.left + window.pageXOffset;
                const containerRightDoc = containerLeftDoc + containerRect.width;

                const vpWidth = window.innerWidth;

                connectors.forEach((obj, idx) => {
                    const { connector, prevItem, nextItem } = obj;

                    const prevCenterY_Doc = (prevItem.offsetTop + prevItem.offsetHeight / 2) + containerTopDoc;
                    const nextCenterY_Doc = (nextItem.offsetTop + nextItem.offsetHeight / 2) + containerTopDoc;

                    let startX, endX;
                    if (idx % 2 === 0) {
                        startX = containerLeftDoc - vpWidth;
                        endX = containerRightDoc + vpWidth;
                    } else {
                        startX = containerRightDoc + vpWidth;
                        endX = containerLeftDoc - vpWidth;
                    }
                    const startY = prevCenterY_Doc;
                    const endY = nextCenterY_Doc;

                    const relStartX = startX - containerLeftDoc;
                    const relStartYh = startY - containerTopDoc * 1.15;
                    const relStartY = startY - containerTopDoc;
                    const relEndX = endX - containerLeftDoc;
                    const relEndY = endY - containerTopDoc;

                    const dx = relEndX - relStartX;
                    const dy = relEndY - relStartY;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx);

                    connector.style.top = `${relStartYh}px`;
                    connector.style.left = `${relStartX}px`;
                    connector.style.width = `${length}px`;
                    connector.style.height = `200px`;
                    connector.style.transform = `rotate(${angle}rad)`;

                    obj.line.style.width = `0px`;
                    obj.line.style.height = `100%`;
                });
            }

            function updateConnectorLinesOnScroll() {
                const viewportHeight = window.innerHeight;

                connectors.forEach(obj => {
                    const { connector, line } = obj;
                    const connRect = connector.getBoundingClientRect();
                    const totalLength = parseFloat(connector.style.width);

                    let progress = 0;
                    if (connRect.bottom < 0) {
                        progress = 1;
                    } else if (connRect.top > viewportHeight) {
                        progress = 0;
                    } else {
                        const frac = (viewportHeight - connRect.top) * 1.2 / (viewportHeight + connRect.height);
                        progress = Math.min(Math.max(frac, 0), 1);
                    }

                    const newWidth = totalLength * progress;
                    line.style.width = `${newWidth}px`;
                });
            }

            function onResizeOrLoad() {
                recalcConnectorPositions();
                updateConnectorLinesOnScroll();
            }
            window.addEventListener('load', onResizeOrLoad);
            window.addEventListener('resize', onResizeOrLoad);
            window.addEventListener('scroll', updateConnectorLinesOnScroll);
        });
    </script>